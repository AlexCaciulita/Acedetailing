<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rezervare | Nova Detailing</title>
    <meta name="description" content="Rezerva o programare pentru servicii premium de auto detailing la Nova Detailing Bucuresti.">
    <link rel="canonical" href="https://novadetailing.ro/rezervare.html">
    <meta property="og:title" content="Rezervare | Nova Detailing">
    <meta property="og:description" content="Rezerva o programare pentru servicii premium de auto detailing la Nova Detailing Bucuresti.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://novadetailing.ro/rezervare.html">
    <meta property="og:image" content="https://novadetailing.ro/assets/rs=h_1000,cg_true.webp">
    <meta property="og:locale" content="ro_RO">
    <meta property="og:site_name" content="Nova Detailing">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Rezervare | Nova Detailing">
    <meta name="twitter:description" content="Rezerva o programare pentru servicii premium de auto detailing la Nova Detailing Bucuresti.">
    <meta name="twitter:image" content="https://novadetailing.ro/assets/rs=h_1000,cg_true.webp">
    <link rel="manifest" href="/manifest.webmanifest">
    <meta name="theme-color" content="#B8962F">
    <link rel="icon" type="image/svg+xml" href="/assets/favicon.svg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
    tailwind.config = {
        theme: {
            extend: {
                colors: {
                    primary: '#B8962F',
                    'primary-light': '#C9A84C',
                    'primary-dark': '#8B7226',
                    secondary: '#1A1A1A',
                    light: {
                        50: '#FFFFFF', 100: '#F9FAFB', 200: '#F3F4F6', 300: '#E5E7EB',
                        400: '#D1D5DB', 500: '#9CA3AF', 600: '#6B7280', 700: '#4B5563',
                        800: '#374151', 900: '#1F2937', 950: '#111827'
                    }
                },
                fontFamily: {
                    heading: ['Montserrat', 'system-ui', 'sans-serif'],
                    body: ['Inter', 'system-ui', 'sans-serif']
                },
                boxShadow: {
                    'gold': '0 4px 20px rgba(184, 150, 47, 0.15)',
                    'gold-lg': '0 8px 40px rgba(184, 150, 47, 0.25)',
                    'soft': '0 1px 3px rgba(0, 0, 0, 0.08), 0 1px 2px rgba(0, 0, 0, 0.06)',
                    'soft-lg': '0 4px 12px rgba(0, 0, 0, 0.08)'
                }
            }
        }
    }
    </script>
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <style>
        [x-cloak] { display: none !important; }
        /* Scroll-triggered reveal */
        .reveal { opacity: 0; transform: translateY(32px); transition: opacity 0.7s cubic-bezier(0.22,1,0.36,1), transform 0.7s cubic-bezier(0.22,1,0.36,1); }
        .reveal.revealed { opacity: 1; transform: translateY(0); }
        .reveal-scale { opacity: 0; transform: scale(0.92); transition: opacity 0.7s cubic-bezier(0.22,1,0.36,1), transform 0.7s cubic-bezier(0.22,1,0.36,1); }
        .reveal-scale.revealed { opacity: 1; transform: scale(1); }
        .stagger-1 { transition-delay: 0.1s; } .stagger-2 { transition-delay: 0.2s; }
        .stagger-3 { transition-delay: 0.3s; } .stagger-4 { transition-delay: 0.4s; }
        .btn-press { position: relative; overflow: hidden; }
        .btn-press:active { transform: scale(0.97); }
        .card-hover { transition: transform 0.3s cubic-bezier(0.22,1,0.36,1), box-shadow 0.3s cubic-bezier(0.22,1,0.36,1), border-color 0.3s; }
        .card-hover:hover { transform: translateY(-4px); box-shadow: 0 12px 32px rgba(0,0,0,0.08); }
        .nav-scrolled { box-shadow: 0 4px 20px rgba(0,0,0,0.08) !important; }
        html { scroll-behavior: smooth; }
    </style>
</head>
<body class="bg-light-50 text-light-950 font-body">

    <!-- Navigation -->
    <nav id="main-nav" class="fixed top-0 w-full bg-white/90 backdrop-blur-xl border-b-2 border-primary shadow-soft z-50" x-data="{ open: false }">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <a href="/index.html" class="flex items-center">
                    <img src="/assets/logo.svg" alt="Nova Detailing" class="h-8 w-auto" width="320" height="80">
                </a>
                <div class="md:hidden">
                    <button @click="open = !open" class="text-light-700 hover:text-primary focus:outline-none focus:text-primary transition-colors">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path x-show="!open" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                            <path x-show="open" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
                <div class="hidden md:flex items-center space-x-8">
                    <a href="/index.html" class="text-light-700 hover:text-primary transition-colors text-sm font-heading">Acasa</a>
                    <a href="/servicii.html" class="text-light-700 hover:text-primary transition-colors text-sm font-heading">Servicii</a>
                    <a href="/configurator.html" class="text-light-700 hover:text-primary transition-colors text-sm font-heading">Configurator</a>
                    <a href="/scoala.html" class="text-light-700 hover:text-primary transition-colors text-sm font-heading">Scoala</a>
                    <a href="/despre.html" class="text-light-700 hover:text-primary transition-colors text-sm font-heading">Despre</a>
                    <a href="/galerie.html" class="text-light-700 hover:text-primary transition-colors text-sm font-heading">Galerie</a>
                    <a href="/contact.html" class="text-light-700 hover:text-primary transition-colors text-sm font-heading">Contact</a>
                    <a href="/rezervare.html" class="bg-primary text-white px-5 py-2 rounded-md hover:bg-primary-light transition-all duration-200 text-sm font-heading font-semibold">Rezervare</a>
                </div>
            </div>
        </div>
        <div x-show="open" x-transition class="md:hidden bg-white/95 backdrop-blur-xl border-b border-light-300">
            <div class="px-4 py-4 space-y-2">
                <a href="/index.html" class="block px-3 py-2 text-light-700 hover:text-primary transition-colors font-heading text-sm">Acasa</a>
                <a href="/servicii.html" class="block px-3 py-2 text-light-700 hover:text-primary transition-colors font-heading text-sm">Servicii</a>
                <a href="/configurator.html" class="block px-3 py-2 text-light-700 hover:text-primary transition-colors font-heading text-sm">Configurator</a>
                <a href="/scoala.html" class="block px-3 py-2 text-light-700 hover:text-primary transition-colors font-heading text-sm">Scoala</a>
                <a href="/despre.html" class="block px-3 py-2 text-light-700 hover:text-primary transition-colors font-heading text-sm">Despre</a>
                <a href="/galerie.html" class="block px-3 py-2 text-light-700 hover:text-primary transition-colors font-heading text-sm">Galerie</a>
                <a href="/contact.html" class="block px-3 py-2 text-light-700 hover:text-primary transition-colors font-heading text-sm">Contact</a>
                <a href="/rezervare.html" class="block px-3 py-2 bg-primary text-white rounded-md font-semibold font-heading text-sm text-center mt-2">Rezervare</a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main x-data="bookingForm()" x-cloak class="pt-24 pb-20">

        <!-- Hero Header -->
        <section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mb-12">
            <div class="text-center reveal">
                <h1 class="text-3xl sm:text-4xl lg:text-5xl font-heading font-bold mb-4">
                    Rezervare <span class="text-primary">Programare</span>
                </h1>
                <p class="text-light-700 text-lg max-w-2xl mx-auto">Alege pachetul dorit, completeaza datele si rezerva-ti locul. Te contactam in cel mai scurt timp pentru confirmare.</p>
                <div class="w-20 h-1 bg-primary mx-auto mt-6 rounded-full"></div>
            </div>
        </section>

        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 reveal">
            <div class="grid lg:grid-cols-3 gap-8">

                <!-- Left Column: Form -->
                <div class="lg:col-span-2 space-y-8">

                    <!-- Step 1: Package Selection -->
                    <section>
                        <div class="flex items-center gap-3 mb-6">
                            <span class="flex items-center justify-center w-8 h-8 rounded-full bg-primary text-white font-heading font-bold text-sm">1</span>
                            <h2 class="text-xl font-heading font-semibold">Alege Pachetul</h2>
                        </div>
                        <div class="grid sm:grid-cols-2 gap-4">
                            <template x-for="pkg in packages" :key="pkg.id">
                                <button
                                    @click="selectedPackage = pkg.id"
                                    :class="selectedPackage === pkg.id
                                        ? 'border-primary bg-primary/10 shadow-gold'
                                        : 'border-light-400 bg-white hover:border-light-400'"
                                    class="relative p-5 rounded-xl border-2 text-left transition-all duration-200 cursor-pointer group"
                                >
                                    <span
                                        x-show="pkg.popular"
                                        class="absolute -top-3 right-4 bg-primary text-white text-xs font-heading font-bold px-3 py-1 rounded-full"
                                    >POPULAR</span>

                                    <h3 class="font-heading font-bold text-sm mb-1" :class="selectedPackage === pkg.id ? 'text-primary' : 'text-light-950'" x-text="pkg.name"></h3>
                                    <p class="text-light-600 text-xs mb-3" x-text="pkg.shortDescription"></p>
                                    <div class="flex items-center justify-between">
                                        <span class="text-primary font-heading font-semibold text-sm" x-text="pkg.priceRange.min + ' - ' + pkg.priceRange.max + ' lei'"></span>
                                        <span class="text-light-600 text-xs flex items-center gap-1">
                                            <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                                            <span x-text="pkg.duration"></span>
                                        </span>
                                    </div>
                                    <div
                                        x-show="selectedPackage === pkg.id"
                                        class="absolute top-3 left-3"
                                    >
                                        <svg class="w-5 h-5 text-primary" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                                    </div>
                                </button>
                            </template>
                        </div>
                    </section>

                    <!-- Step 2: Vehicle Details -->
                    <section>
                        <div class="flex items-center gap-3 mb-6">
                            <span class="flex items-center justify-center w-8 h-8 rounded-full bg-primary text-white font-heading font-bold text-sm">2</span>
                            <h2 class="text-xl font-heading font-semibold">Detalii Vehicul</h2>
                        </div>
                        <div class="bg-white border border-light-400 rounded-xl p-6 space-y-5">
                            <div>
                                <label class="block text-sm font-heading font-medium text-light-700 mb-2">Model Masina</label>
                                <input
                                    type="text"
                                    x-model="carModel"
                                    placeholder="ex: BMW Seria 3 2022"
                                    class="w-full bg-light-100 border border-light-400 rounded-lg px-4 py-3 text-light-950 placeholder-light-500 focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-colors text-sm"
                                >
                            </div>
                            <div class="grid sm:grid-cols-2 gap-5">
                                <div>
                                    <label class="block text-sm font-heading font-medium text-light-700 mb-2">Dimensiune</label>
                                    <select
                                        x-model="size"
                                        class="w-full bg-light-100 border border-light-400 rounded-lg px-4 py-3 text-light-950 focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-colors text-sm appearance-none cursor-pointer"
                                    >
                                        <option value="" disabled>Selecteaza dimensiunea</option>
                                        <template x-for="(info, key) in sizeMultipliers" :key="key">
                                            <option :value="key" x-text="info.label" :selected="size === key"></option>
                                        </template>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-heading font-medium text-light-700 mb-2">Stare</label>
                                    <select
                                        x-model="condition"
                                        class="w-full bg-light-100 border border-light-400 rounded-lg px-4 py-3 text-light-950 focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-colors text-sm appearance-none cursor-pointer"
                                    >
                                        <option value="" disabled>Selecteaza starea</option>
                                        <template x-for="(info, key) in conditionMultipliers" :key="key">
                                            <option :value="key" x-text="info.label" :selected="condition === key"></option>
                                        </template>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Step 3: Add-ons -->
                    <section>
                        <div class="flex items-center gap-3 mb-6">
                            <span class="flex items-center justify-center w-8 h-8 rounded-full bg-primary text-white font-heading font-bold text-sm">3</span>
                            <h2 class="text-xl font-heading font-semibold">Servicii Aditionale</h2>
                        </div>
                        <div class="grid sm:grid-cols-2 gap-3">
                            <template x-for="addon in addons" :key="addon.id">
                                <button
                                    @click="toggleAddon(addon.id)"
                                    :class="selectedAddons.includes(addon.id)
                                        ? 'border-primary bg-primary/10'
                                        : 'border-light-400 bg-white hover:border-light-400'"
                                    class="flex items-start gap-3 p-4 rounded-xl border transition-all duration-200 text-left cursor-pointer"
                                >
                                    <div class="mt-0.5 flex-shrink-0">
                                        <div
                                            :class="selectedAddons.includes(addon.id)
                                                ? 'bg-primary border-primary'
                                                : 'bg-light-100 border-light-400'"
                                            class="w-5 h-5 rounded border-2 flex items-center justify-center transition-colors"
                                        >
                                            <svg x-show="selectedAddons.includes(addon.id)" class="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>
                                        </div>
                                    </div>
                                    <div class="flex-1 min-w-0">
                                        <div class="flex items-center justify-between gap-2">
                                            <span class="font-heading font-medium text-sm text-light-950" x-text="addon.name"></span>
                                            <span class="text-primary font-heading font-semibold text-sm flex-shrink-0" x-text="addon.price === 0 ? 'GRATIS' : addon.price + ' lei'"></span>
                                        </div>
                                        <p class="text-light-600 text-xs mt-1" x-text="addon.description"></p>
                                    </div>
                                </button>
                            </template>
                        </div>
                    </section>

                    <!-- Step 4: Customer Info -->
                    <section>
                        <div class="flex items-center gap-3 mb-6">
                            <span class="flex items-center justify-center w-8 h-8 rounded-full bg-primary text-white font-heading font-bold text-sm">4</span>
                            <h2 class="text-xl font-heading font-semibold">Datele Tale</h2>
                        </div>
                        <div class="bg-white border border-light-400 rounded-xl p-6 space-y-5">
                            <div>
                                <label class="block text-sm font-heading font-medium text-light-700 mb-2">Nume Complet <span class="text-primary">*</span></label>
                                <input
                                    type="text"
                                    x-model="name"
                                    placeholder="Ion Popescu"
                                    required
                                    class="w-full bg-light-100 border border-light-400 rounded-lg px-4 py-3 text-light-950 placeholder-light-500 focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-colors text-sm"
                                >
                            </div>
                            <div class="grid sm:grid-cols-2 gap-5">
                                <div>
                                    <label class="block text-sm font-heading font-medium text-light-700 mb-2">Telefon <span class="text-primary">*</span></label>
                                    <input
                                        type="tel"
                                        x-model="phone"
                                        placeholder="+40 7XX XXX XXX"
                                        required
                                        class="w-full bg-light-100 border border-light-400 rounded-lg px-4 py-3 text-light-950 placeholder-light-500 focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-colors text-sm"
                                    >
                                </div>
                                <div>
                                    <label class="block text-sm font-heading font-medium text-light-700 mb-2">Email <span class="text-primary">*</span></label>
                                    <input
                                        type="email"
                                        x-model="email"
                                        placeholder="email@exemplu.ro"
                                        required
                                        class="w-full bg-light-100 border border-light-400 rounded-lg px-4 py-3 text-light-950 placeholder-light-500 focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-colors text-sm"
                                    >
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Step 5: Date & Time -->
                    <section>
                        <div class="flex items-center gap-3 mb-6">
                            <span class="flex items-center justify-center w-8 h-8 rounded-full bg-primary text-white font-heading font-bold text-sm">5</span>
                            <h2 class="text-xl font-heading font-semibold">Data si Ora</h2>
                        </div>
                        <div class="bg-white border border-light-400 rounded-xl p-6">
                            <div class="grid sm:grid-cols-2 gap-5">
                                <div>
                                    <label class="block text-sm font-heading font-medium text-light-700 mb-2">Data Dorita <span class="text-primary">*</span></label>
                                    <input
                                        type="date"
                                        x-model="date"
                                        :min="minDate"
                                        required
                                        class="w-full bg-light-100 border border-light-400 rounded-lg px-4 py-3 text-light-950 focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-colors text-sm [color-scheme:light]"
                                    >
                                </div>
                                <div>
                                    <label class="block text-sm font-heading font-medium text-light-700 mb-2">Interval Orar <span class="text-primary">*</span></label>
                                    <select
                                        x-model="timeSlot"
                                        required
                                        class="w-full bg-light-100 border border-light-400 rounded-lg px-4 py-3 text-light-950 focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-colors text-sm appearance-none cursor-pointer"
                                    >
                                        <option value="" disabled>Selecteaza intervalul</option>
                                        <option value="08:00-10:00">08:00 - 10:00</option>
                                        <option value="10:00-12:00">10:00 - 12:00</option>
                                        <option value="12:00-14:00">12:00 - 14:00</option>
                                        <option value="14:00-16:00">14:00 - 16:00</option>
                                        <option value="16:00-18:00">16:00 - 18:00</option>
                                    </select>
                                </div>
                            </div>
                            <p class="text-light-500 text-xs mt-4">* Program: L-V 08:00 - 18:00 | S 08:00 - 16:00. Te vom contacta pentru confirmare.</p>
                        </div>
                    </section>

                    <!-- Notes -->
                    <section>
                        <div class="bg-white border border-light-400 rounded-xl p-6">
                            <label class="block text-sm font-heading font-medium text-light-700 mb-2">Observatii (optional)</label>
                            <textarea
                                x-model="notes"
                                rows="3"
                                placeholder="Detalii suplimentare despre masina sau cerinte speciale..."
                                class="w-full bg-light-100 border border-light-400 rounded-lg px-4 py-3 text-light-950 placeholder-light-500 focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-colors text-sm resize-none"
                            ></textarea>
                        </div>
                    </section>

                    <!-- Submit (mobile only) -->
                    <div class="lg:hidden">
                        <button
                            @click="submitBooking()"
                            :disabled="!isFormValid || submitting"
                            :class="isFormValid && !submitting
                                ? 'bg-primary hover:bg-primary-light text-white shadow-gold cursor-pointer'
                                : 'bg-light-300 text-light-600 cursor-not-allowed'"
                            class="w-full py-4 rounded-xl font-heading font-bold text-base transition-all duration-200 btn-press"
                        >
                            <span x-show="!submitting">Trimite Rezervarea</span>
                            <span x-show="submitting" class="flex items-center justify-center gap-2">
                                <svg class="animate-spin w-5 h-5" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"/><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"/></svg>
                                Se trimite...
                            </span>
                        </button>
                    </div>
                </div>

                <!-- Right Column: Summary Sidebar -->
                <div class="lg:col-span-1">
                    <div class="sticky top-24">
                        <div class="bg-white border border-light-400 rounded-xl overflow-hidden">
                            <div class="bg-light-200 px-6 py-4">
                                <h3 class="font-heading font-bold text-base text-light-950">Sumar Rezervare</h3>
                            </div>

                            <div class="p-6 space-y-5">
                                <!-- Selected Package -->
                                <div>
                                    <p class="text-light-600 text-xs font-heading uppercase tracking-wider mb-2">Pachet selectat</p>
                                    <template x-if="selectedPackage">
                                        <div>
                                            <p class="text-light-950 font-heading font-semibold text-sm" x-text="getSelectedPackage()?.name"></p>
                                            <p class="text-light-600 text-xs mt-1" x-text="getSelectedPackage()?.duration"></p>
                                        </div>
                                    </template>
                                    <template x-if="!selectedPackage">
                                        <p class="text-light-500 text-sm italic">Niciun pachet selectat</p>
                                    </template>
                                </div>

                                <!-- Vehicle -->
                                <div x-show="carModel || size || condition">
                                    <p class="text-light-600 text-xs font-heading uppercase tracking-wider mb-2">Vehicul</p>
                                    <p x-show="carModel" class="text-light-950 text-sm" x-text="carModel"></p>
                                    <p x-show="size" class="text-light-700 text-xs mt-1" x-text="sizeMultipliers[size]?.label"></p>
                                    <p x-show="condition" class="text-light-700 text-xs mt-1" x-text="conditionMultipliers[condition]?.label"></p>
                                </div>

                                <!-- Add-ons -->
                                <div x-show="selectedAddons.length > 0">
                                    <p class="text-light-600 text-xs font-heading uppercase tracking-wider mb-2">Servicii aditionale</p>
                                    <ul class="space-y-1">
                                        <template x-for="addonId in selectedAddons" :key="addonId">
                                            <li class="flex justify-between text-sm">
                                                <span class="text-light-700" x-text="getAddonByIdLocal(addonId)?.name"></span>
                                                <span class="text-primary font-heading font-medium" x-text="getAddonByIdLocal(addonId)?.price === 0 ? 'GRATIS' : '+' + getAddonByIdLocal(addonId)?.price + ' lei'"></span>
                                            </li>
                                        </template>
                                    </ul>
                                </div>

                                <!-- Date & Time -->
                                <div x-show="date || timeSlot">
                                    <p class="text-light-600 text-xs font-heading uppercase tracking-wider mb-2">Programare</p>
                                    <p x-show="date" class="text-light-950 text-sm" x-text="formatDate(date)"></p>
                                    <p x-show="timeSlot" class="text-light-700 text-xs mt-1" x-text="timeSlot"></p>
                                </div>

                                <!-- Divider -->
                                <div class="border-t border-light-400"></div>

                                <!-- Price Breakdown -->
                                <div>
                                    <div class="flex justify-between items-center mb-2">
                                        <span class="text-light-600 text-sm">Pachet de baza</span>
                                        <span class="text-light-950 text-sm font-heading" x-text="selectedPackage ? calculatedPrice.min + ' - ' + calculatedPrice.max + ' lei' : '- lei'"></span>
                                    </div>
                                    <div x-show="addonsTotal > 0" class="flex justify-between items-center mb-2">
                                        <span class="text-light-600 text-sm">Servicii extra</span>
                                        <span class="text-light-950 text-sm font-heading" x-text="'+' + addonsTotal + ' lei'"></span>
                                    </div>
                                    <div class="border-t border-light-400 my-3"></div>
                                    <div class="flex justify-between items-center">
                                        <span class="text-light-950 font-heading font-bold">Total estimat</span>
                                        <span class="text-primary font-heading font-bold text-lg" x-text="selectedPackage ? totalMin + ' - ' + totalMax + ' lei' : '- lei'"></span>
                                    </div>
                                    <p class="text-light-500 text-xs mt-2">* Pretul final va fi confirmat dupa inspectia vehiculului.</p>
                                </div>

                                <!-- Submit Button (desktop) -->
                                <div class="hidden lg:block">
                                    <button
                                        @click="submitBooking()"
                                        :disabled="!isFormValid || submitting"
                                        :class="isFormValid && !submitting
                                            ? 'bg-primary hover:bg-primary-light text-white shadow-gold cursor-pointer'
                                            : 'bg-light-300 text-light-600 cursor-not-allowed'"
                                        class="w-full py-4 rounded-xl font-heading font-bold text-base transition-all duration-200 btn-press"
                                    >
                                        <span x-show="!submitting">Trimite Rezervarea</span>
                                        <span x-show="submitting" class="flex items-center justify-center gap-2">
                                            <svg class="animate-spin w-5 h-5" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"/><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"/></svg>
                                            Se trimite...
                                        </span>
                                    </button>
                                </div>

                                <!-- Contact quick info -->
                                <div class="flex items-center gap-2 text-light-500 text-xs">
                                    <svg class="w-4 h-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg>
                                    <span>Intrebari? Suna la <a href="tel:+40742122222" class="text-primary hover:text-primary-light">+40 742 122 222</a></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Success Modal -->
        <div
            x-show="submitted"
            x-transition:enter="transition ease-out duration-300"
            x-transition:enter-start="opacity-0"
            x-transition:enter-end="opacity-100"
            x-transition:leave="transition ease-in duration-200"
            x-transition:leave-start="opacity-100"
            x-transition:leave-end="opacity-0"
            class="fixed inset-0 bg-light-950/80 backdrop-blur-sm z-50 flex items-center justify-center p-4"
            @click.self="submitted = false"
        >
            <div
                x-show="submitted"
                x-transition:enter="transition ease-out duration-300"
                x-transition:enter-start="opacity-0 scale-95"
                x-transition:enter-end="opacity-100 scale-100"
                class="bg-white border border-light-400 rounded-2xl p-8 max-w-md w-full text-center shadow-soft-lg"
            >
                <div class="w-16 h-16 bg-primary/20 rounded-full flex items-center justify-center mx-auto mb-6">
                    <svg class="w-8 h-8 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
                </div>
                <h3 class="text-2xl font-heading font-bold mb-3">Rezervare Trimisa!</h3>
                <p class="text-light-700 text-sm mb-6">Multumim! Am primit cererea ta de programare. Te vom contacta in cel mai scurt timp pentru confirmare la numarul de telefon furnizat.</p>
                <div class="flex flex-col sm:flex-row gap-3">
                    <a href="/index.html" class="flex-1 bg-light-200 text-light-950 px-6 py-3 rounded-xl font-heading font-semibold text-sm hover:bg-light-300 transition-colors text-center btn-press">Inapoi Acasa</a>
                    <button @click="resetForm()" class="flex-1 bg-primary text-white px-6 py-3 rounded-xl font-heading font-semibold text-sm hover:bg-primary-light transition-colors btn-press">Rezervare Noua</button>
                </div>
            </div>
        </div>

        <!-- Error Modal -->
        <div
            x-show="errorMessage"
            x-transition:enter="transition ease-out duration-300"
            x-transition:enter-start="opacity-0"
            x-transition:enter-end="opacity-100"
            x-transition:leave="transition ease-in duration-200"
            x-transition:leave-start="opacity-100"
            x-transition:leave-end="opacity-0"
            class="fixed inset-0 bg-light-950/80 backdrop-blur-sm z-50 flex items-center justify-center p-4"
            @click.self="errorMessage = ''"
        >
            <div
                x-show="errorMessage"
                x-transition:enter="transition ease-out duration-300"
                x-transition:enter-start="opacity-0 scale-95"
                x-transition:enter-end="opacity-100 scale-100"
                class="bg-white border border-red-900/50 rounded-2xl p-8 max-w-md w-full text-center shadow-soft-lg"
            >
                <div class="w-16 h-16 bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-6">
                    <svg class="w-8 h-8 text-red-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"/></svg>
                </div>
                <h3 class="text-2xl font-heading font-bold mb-3 text-red-400">Eroare</h3>
                <p class="text-light-700 text-sm mb-6" x-text="errorMessage"></p>
                <button @click="errorMessage = ''" class="bg-light-200 text-light-950 px-8 py-3 rounded-xl font-heading font-semibold text-sm hover:bg-light-300 transition-colors">Inchide</button>
            </div>
        </div>

    </main>

    <!-- Footer -->
    <footer class="bg-light-950 border-t border-light-300 py-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-8">
                <div class="sm:col-span-2 lg:col-span-1">
                    <a href="/" class="flex items-center mb-4">
                        <img src="/assets/logo.svg" alt="Nova Detailing" class="h-8 w-auto" loading="lazy" width="320" height="80">
                    </a>
                    <p class="text-light-400 text-sm mb-4">Premium Auto Detailing & Scoala de Detailing in Bucuresti. 17+ ani de experienta.</p>
                </div>
                <div>
                    <h3 class="text-sm font-heading font-semibold text-light-100 uppercase tracking-wider mb-4">Navigatie</h3>
                    <ul class="space-y-2">
                        <li><a href="/servicii.html" class="text-light-400 hover:text-primary transition-colors text-sm">Servicii</a></li>
                        <li><a href="/configurator.html" class="text-light-400 hover:text-primary transition-colors text-sm">Configurator Pret</a></li>
                        <li><a href="/galerie.html" class="text-light-400 hover:text-primary transition-colors text-sm">Galerie</a></li>
                        <li><a href="/rezervare.html" class="text-light-400 hover:text-primary transition-colors text-sm">Rezervare</a></li>
                        <li><a href="/blog.html" class="text-light-400 hover:text-primary transition-colors text-sm">Blog</a></li>
                        <li><a href="/faq.html" class="text-light-400 hover:text-primary transition-colors text-sm">FAQ</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-sm font-heading font-semibold text-light-100 uppercase tracking-wider mb-4">Scoala</h3>
                    <ul class="space-y-2">
                        <li><a href="/scoala.html" class="text-light-400 hover:text-primary transition-colors text-sm">Cursuri Detailing</a></li>
                        <li><a href="/scoala.html#fundamentals" class="text-light-400 hover:text-primary transition-colors text-sm">Curs Fundamentals</a></li>
                        <li><a href="/scoala.html#advanced" class="text-light-400 hover:text-primary transition-colors text-sm">Curs Advanced</a></li>
                        <li><a href="/scoala.html#online" class="text-light-400 hover:text-primary transition-colors text-sm">Curs Online</a></li>
                        <li><a href="/despre.html" class="text-light-400 hover:text-primary transition-colors text-sm">Despre Noi</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-sm font-heading font-semibold text-light-100 uppercase tracking-wider mb-4">Contact</h3>
                    <ul class="space-y-3 text-sm">
                        <li><a href="tel:+40742122222" class="flex items-center gap-2 text-light-400 hover:text-primary transition-colors"><svg class="w-4 h-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg>+40 742 122 222</a></li>
                        <li><a href="mailto:contact@novadetailing.ro" class="flex items-center gap-2 text-light-400 hover:text-primary transition-colors"><svg class="w-4 h-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>contact@novadetailing.ro</a></li>
                        <li class="flex items-start gap-2 text-light-400"><svg class="w-4 h-4 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/></svg>Bucuresti, Romania</li>
                        <li class="flex items-center gap-2 text-light-400"><svg class="w-4 h-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>L-V: 8-18 | S: 8-16</li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-light-800 mt-12 pt-8 flex flex-col sm:flex-row justify-between items-center gap-4">
                <p class="text-light-500 text-sm">&copy; 2026 Nova Detailing. Toate drepturile rezervate.</p>
                <div class="flex space-x-6">
                    <a href="/politici.html" class="text-light-500 hover:text-primary transition-colors text-sm">Termeni & Conditii</a>
                    <a href="/politici.html#confidentialitate" class="text-light-500 hover:text-primary transition-colors text-sm">Confidentialitate</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Load services data as module, expose to window for Alpine -->
    <script type="module">
        import { packages, addons, sizeMultipliers, conditionMultipliers, getPackageById, getAddonById, calculatePrice } from '/services-data.js';

        window._servicesData = {
            packages,
            addons,
            sizeMultipliers,
            conditionMultipliers,
            getPackageById,
            getAddonById,
            calculatePrice
        };

        // Dispatch event so Alpine knows data is ready
        window.dispatchEvent(new CustomEvent('services-data-ready'));
    </script>

    <!-- Alpine.js Booking Form -->
    <script>
        function bookingForm() {
            return {
                // Data from services-data.js (populated in init)
                packages: [],
                addons: [],
                sizeMultipliers: {},
                conditionMultipliers: {},
                _getPackageById: null,
                _getAddonById: null,
                _calculatePrice: null,

                // Form state
                selectedPackage: '',
                size: '',
                condition: '',
                carModel: '',
                selectedAddons: [],
                name: '',
                phone: '',
                email: '',
                date: '',
                timeSlot: '',
                notes: '',

                // UI state
                submitting: false,
                submitted: false,
                errorMessage: '',

                // Min date (tomorrow)
                minDate: (() => {
                    const tomorrow = new Date();
                    tomorrow.setDate(tomorrow.getDate() + 1);
                    return tomorrow.toISOString().split('T')[0];
                })(),

                get calculatedPrice() {
                    if (!this.selectedPackage || !this._calculatePrice) return { min: 0, max: 0 };
                    const sizeKey = this.size || 'sedan';
                    const condKey = this.condition || 'usoara';
                    return this._calculatePrice(this.selectedPackage, sizeKey, condKey);
                },

                get addonsTotal() {
                    if (!this._getAddonById) return 0;
                    return this.selectedAddons.reduce((sum, id) => {
                        const addon = this._getAddonById(id);
                        return sum + (addon ? addon.price : 0);
                    }, 0);
                },

                get totalMin() {
                    return this.calculatedPrice.min + this.addonsTotal;
                },

                get totalMax() {
                    return this.calculatedPrice.max + this.addonsTotal;
                },

                get isFormValid() {
                    return this.selectedPackage
                        && this.size
                        && this.condition
                        && this.name.trim()
                        && this.phone.trim()
                        && this.email.trim()
                        && this.date
                        && this.timeSlot;
                },

                init() {
                    const loadData = () => {
                        if (window._servicesData) {
                            this.packages = window._servicesData.packages;
                            this.addons = window._servicesData.addons;
                            this.sizeMultipliers = window._servicesData.sizeMultipliers;
                            this.conditionMultipliers = window._servicesData.conditionMultipliers;
                            this._getPackageById = window._servicesData.getPackageById;
                            this._getAddonById = window._servicesData.getAddonById;
                            this._calculatePrice = window._servicesData.calculatePrice;

                            // Load saved config from configurator
                            this.loadFromLocalStorage();

                            // Override with URL param if present (e.g. from configurator link)
                            const params = new URLSearchParams(window.location.search);
                            const pachet = params.get('pachet');
                            if (pachet && this._getPackageById(pachet)) {
                                this.selectedPackage = pachet;
                            }

                            return true;
                        }
                        return false;
                    };

                    if (!loadData()) {
                        window.addEventListener('services-data-ready', () => loadData());
                    }
                },

                loadFromLocalStorage() {
                    try {
                        const saved = JSON.parse(localStorage.getItem('aceConfig') || '{}');
                        if (saved.packageId) this.selectedPackage = saved.packageId;
                        if (saved.size) this.size = saved.size;
                        if (saved.condition) this.condition = saved.condition;
                        if (saved.carModel) this.carModel = saved.carModel;
                        if (saved.addons && Array.isArray(saved.addons)) this.selectedAddons = [...saved.addons];
                    } catch (e) {
                        // Silently ignore parse errors
                    }
                },

                getSelectedPackage() {
                    if (!this._getPackageById) return null;
                    return this._getPackageById(this.selectedPackage);
                },

                getAddonByIdLocal(id) {
                    if (!this._getAddonById) return null;
                    return this._getAddonById(id);
                },

                toggleAddon(id) {
                    const idx = this.selectedAddons.indexOf(id);
                    if (idx > -1) {
                        this.selectedAddons.splice(idx, 1);
                    } else {
                        this.selectedAddons.push(id);
                    }
                },

                formatDate(dateStr) {
                    if (!dateStr) return '';
                    const d = new Date(dateStr + 'T00:00:00');
                    const days = ['Duminica', 'Luni', 'Marti', 'Miercuri', 'Joi', 'Vineri', 'Sambata'];
                    const months = ['Ianuarie', 'Februarie', 'Martie', 'Aprilie', 'Mai', 'Iunie', 'Iulie', 'August', 'Septembrie', 'Octombrie', 'Noiembrie', 'Decembrie'];
                    return days[d.getDay()] + ', ' + d.getDate() + ' ' + months[d.getMonth()] + ' ' + d.getFullYear();
                },

                async submitBooking() {
                    if (!this.isFormValid || this.submitting) return;

                    this.submitting = true;
                    this.errorMessage = '';

                    const pkg = this.getSelectedPackage();

                    const payload = {
                        package: this.selectedPackage,
                        packageName: pkg ? pkg.name : '',
                        size: this.size,
                        sizeLabel: this.sizeMultipliers[this.size]?.label || '',
                        condition: this.condition,
                        conditionLabel: this.conditionMultipliers[this.condition]?.label || '',
                        carModel: this.carModel,
                        addons: this.selectedAddons,
                        addonNames: this.selectedAddons.map(id => {
                            const a = this.getAddonByIdLocal(id);
                            return a ? a.name : id;
                        }),
                        name: this.name.trim(),
                        phone: this.phone.trim(),
                        email: this.email.trim(),
                        date: this.date,
                        timeSlot: this.timeSlot,
                        notes: this.notes.trim(),
                        estimatedPrice: {
                            min: this.totalMin,
                            max: this.totalMax
                        }
                    };

                    try {
                        const response = await fetch('/api/create-booking', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });

                        if (!response.ok) {
                            const data = await response.json().catch(() => ({}));
                            throw new Error(data.message || 'A aparut o eroare. Te rugam sa incerci din nou.');
                        }

                        this.submitted = true;
                        localStorage.removeItem('aceConfig');
                    } catch (err) {
                        this.errorMessage = err.message || 'Nu s-a putut trimite rezervarea. Verifica conexiunea la internet si incearca din nou.';
                    } finally {
                        this.submitting = false;
                    }
                },

                resetForm() {
                    this.selectedPackage = '';
                    this.size = '';
                    this.condition = '';
                    this.carModel = '';
                    this.selectedAddons = [];
                    this.name = '';
                    this.phone = '';
                    this.email = '';
                    this.date = '';
                    this.timeSlot = '';
                    this.notes = '';
                    this.submitted = false;
                    this.errorMessage = '';
                }
            };
        }
    </script>

    <script>
    (function() {
        var revealEls = document.querySelectorAll('.reveal, .reveal-left, .reveal-right, .reveal-scale');
        if (revealEls.length && 'IntersectionObserver' in window) {
            var observer = new IntersectionObserver(function(entries) {
                entries.forEach(function(entry) {
                    if (entry.isIntersecting) { entry.target.classList.add('revealed'); observer.unobserve(entry.target); }
                });
            }, { threshold: 0.15, rootMargin: '0px 0px -40px 0px' });
            revealEls.forEach(function(el) { observer.observe(el); });
        } else { revealEls.forEach(function(el) { el.classList.add('revealed'); }); }
        var nav = document.getElementById('main-nav');
        if (nav) {
            var ticking = false;
            window.addEventListener('scroll', function() {
                if (!ticking) { requestAnimationFrame(function() { nav.classList.toggle('nav-scrolled', window.scrollY > 50); ticking = false; }); ticking = true; }
            }, { passive: true });
        }
    })();
    </script>

</body>
</html>
